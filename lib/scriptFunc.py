# -*- coding=utf-8 -*-
import os
import prettytable
import importlib


def loadScripts(url, cms, script):
    try:
        script = importlib.import_module('scripts.' + cms + "." + script.split(".")[0])
        script.poc()
    except ImportError as e:
        print("\033[31m[!] Import script error.Please make sure the script name and type name are right!\033[0m\n")
        exit()

def listScripts(cms):
    table = prettytable.PrettyTable()
    table.field_names = ["ID", "cms Name", "script Name"]
    path = SYSPATH + "\\scripts" + "\\" + cms
    scripts = os.listdir(path)
    num = 1
    row = []
    row.append(num)
    row.append(cms)
    result = ""
    for script in scripts:
        result += script + "\n"
    row.append(result)
    table.add_row(row)
    print(table)

def showScripts(cms, script, show):
    path = SYSPATH + "\\scripts" + "\\" + cms + "\\" + script
    with open(path) as f:
        content = f.read()
    
    print("the " + cms + "'s " + script + ":\n")
    print(content)
